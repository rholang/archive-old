"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
// TODO: Move this file out of src if it is a build script
/* eslint-disable import/no-extraneous-dependencies */
var svgexport = tslib_1.__importStar(require("svgexport"));
var path_1 = require("path");
var fs_1 = require("fs");
var rimraf_1 = tslib_1.__importDefault(require("rimraf"));
var image_sources_1 = tslib_1.__importDefault(require("./image-sources"));
var constants_1 = require("./constants");
var coreIconSrc = path_1.resolve(__dirname, '../svg');
var tempFolder = path_1.resolve(__dirname, './tmp');
var generatedWarning = "\n// DO NOT EDIT THIS FILE DIRECTLY!\n// This file was auto generated and may be overritten.\n// To make changes, use the generator.\n";
var exportOpts = image_sources_1.default.map(function (file) { return ({
    name: file.name,
    outputPath: path_1.resolve(tempFolder, "./" + file.name + "." + constants_1.imageOutputType),
    input: path_1.resolve(coreIconSrc, file.input + ".svg"),
    output: path_1.resolve(tempFolder, "./" + file.name + "." + constants_1.imageOutputType) +
        (" " + file.exportSize + " 80%"),
}); });
var createIcons = function () {
    svgexport.render(exportOpts, function () {
        createIndividualIconModules();
        var indexFileExports = exportOpts
            .map(function (icon) { return "export * from './" + icon.name + "'"; })
            .join('\n');
        var indexFileEnum = "\n      export enum IconName {\n        " + exportOpts.map(function (icon) { return icon.name + " = '" + icon.name + "',"; }).join('\n') + "\n      }";
        var indexFileIconNameType = "\n      export type IconString =\n        " + exportOpts.map(function (icon) { return "'" + icon.name + "'"; }).join(' | ') + "\n      ";
        var indexFileContents = [
            generatedWarning,
            indexFileExports,
            indexFileEnum,
            indexFileIconNameType,
        ].join('\n');
        fs_1.writeFileSync(path_1.resolve(__dirname, "../icons/index.ts"), indexFileContents);
        rimraf_1.default(tempFolder, function () {
            // if (err) return console.log(err);
        });
    });
};
var createIndividualIconModules = function () {
    exportOpts.map(function (icon) {
        return fs_1.writeFileSync(path_1.resolve(__dirname, "../icons/" + icon.name + ".ts"), generatedWarning + "\n      export const " + icon.name + " = '" + fs_1.readFileSync(icon.outputPath).toString('base64') + "'");
    });
};
createIcons();
//# sourceMappingURL=generate.js.map